#!/bin/sh
# WIP
# Copyright (c) 2020 Jovan Lanik

# Bake file contents into a C header

error() {
	echo "$0: $1." >&2
	exit 1
}

[ "$1" ] && { [ "$2" ] || error "Bad usage"; }
command -v xxd > /dev/null || error "xxd is required and not installed"

NAME=$(basename "$1" | tr -c '[:alnum:]' '_' | sed 's/.$/\n/g')
INPUT=$1
OUTPUT=$2
(
	echo "// This file is generated by $0. Do not edit!"
	echo "const char ${NAME}[] = {"
	xxd -i < "$INPUT"
	echo ", 0x00 };"
) > "$OUTPUT"
